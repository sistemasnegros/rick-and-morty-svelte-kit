import{S as T,i as z,s as I,e as h,k as w,t as O,c as g,a as y,m as L,h as R,d as _,b as i,g as S,F as d,O as b,G as q,P as N,j as F,E,Q as G,w as M,M as j,x as k,y as A,q as B,o as C,B as H}from"../chunks/index-9f470294.js";import{a as $}from"../chunks/guard-ab8716a4.js";import{a as D,U as J}from"../chunks/auth-28c57a3d.js";import{g as Q}from"../chunks/navigation-0e6511d1.js";import"../chunks/index-0c949a94.js";import"../chunks/singletons-d1fb5791.js";function V(r){let t,e,a,s,u,o,p,m,f,l;return{c(){t=h("form"),e=h("input"),a=w(),s=h("input"),u=w(),o=h("button"),p=O(r[2]),this.h()},l(n){t=g(n,"FORM",{class:!0});var c=y(t);e=g(c,"INPUT",{type:!0,name:!0,placeholder:!0,"aria-label":!0,autocomplete:!0,class:!0}),a=L(c),s=g(c,"INPUT",{type:!0,name:!0,placeholder:!0,"aria-label":!0,autocomplete:!0,class:!0}),u=L(c),o=g(c,"BUTTON",{type:!0,class:!0,"aria-busy":!0});var v=y(o);p=R(v,r[2]),v.forEach(_),c.forEach(_),this.h()},h(){i(e,"type","text"),i(e,"name","login"),i(e,"placeholder","Login"),i(e,"aria-label","Login"),i(e,"autocomplete","false"),e.required=!0,i(e,"class","svelte-a0z3q3"),i(s,"type","password"),i(s,"name","password"),i(s,"placeholder","Password"),i(s,"aria-label","Password"),i(s,"autocomplete","current-password"),s.required=!0,i(s,"class","svelte-a0z3q3"),i(o,"type","submit"),i(o,"class","outline svelte-a0z3q3"),i(o,"aria-busy",m=r[0].isLoading),i(t,"class","svelte-a0z3q3")},m(n,c){S(n,t,c),d(t,e),b(e,r[1].username),d(t,a),d(t,s),b(s,r[1].password),d(t,u),d(t,o),d(o,p),f||(l=[q(e,"input",r[5]),q(s,"input",r[6]),q(t,"submit",N(r[7]))],f=!0)},p(n,[c]){c&2&&e.value!==n[1].username&&b(e,n[1].username),c&2&&s.value!==n[1].password&&b(s,n[1].password),c&4&&F(p,n[2]),c&1&&m!==(m=n[0].isLoading)&&i(o,"aria-busy",m)},i:E,o:E,d(n){n&&_(t),f=!1,G(l)}}}function K(r,t,e){let a,{submit:s}=t,u={isInvalid:!1,isLoading:!1},o={username:"admin",password:"pass"};const p=async n=>{e(0,u.isLoading=!0,u),await s(n),e(0,u.isLoading=!1,u)};function m(){o.username=this.value,e(1,o)}function f(){o.password=this.value,e(1,o)}const l=()=>p(o);return r.$$set=n=>{"submit"in n&&e(4,s=n.submit)},r.$$.update=()=>{r.$$.dirty&1&&e(2,a=u.isLoading?"Please wait":"Login")},[u,o,a,p,s,m,f,l]}class W extends T{constructor(t){super(),z(this,t,K,V,I,{submit:4})}}class X{async login({username:t,password:e}){try{const a={username:t,password:e};return new Promise(s=>{setTimeout(()=>{s([a,null])},3e3)})}catch(a){return[null,a]}}}class Y{constructor(t){this._repository=t}async login({username:t,password:e}){const[a]=await this._repository.login({username:t,password:e});return a}}const Z=new Y(new X);function x(r){let t,e,a,s,u,o,p,m,f;return m=new W({props:{submit:r[0]}}),{c(){t=w(),e=h("article"),a=h("div"),s=h("hgroup"),u=h("h1"),o=O("Sign in"),p=w(),M(m.$$.fragment),this.h()},l(l){j('[data-svelte="svelte-1bel8ov"]',document.head).forEach(_),t=L(l),e=g(l,"ARTICLE",{class:!0});var c=y(e);a=g(c,"DIV",{});var v=y(a);s=g(v,"HGROUP",{});var U=y(s);u=g(U,"H1",{});var P=y(u);o=R(P,"Sign in"),P.forEach(_),U.forEach(_),p=L(v),k(m.$$.fragment,v),v.forEach(_),c.forEach(_),this.h()},h(){document.title="Login",i(e,"class","grid")},m(l,n){S(l,t,n),S(l,e,n),d(e,a),d(a,s),d(s,u),d(u,o),d(a,p),A(m,a,null),f=!0},p:E,i(l){f||(B(m.$$.fragment,l),f=!0)},o(l){C(m.$$.fragment,l),f=!1},d(l){l&&_(t),l&&_(e),H(m)}}}const ie=async({url:r})=>$(r);function ee(r){return[async e=>{const a=await Z.login(e);D.login(a),window.localStorage.setItem("user",JSON.stringify(a)),Q(J.rickAndMorty.characters)}]}class le extends T{constructor(t){super(),z(this,t,ee,x,I,{})}}export{le as default,ie as load};
